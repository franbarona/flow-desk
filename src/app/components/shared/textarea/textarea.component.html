<div class="flex flex-col gap-1.5">
  <!-- Label -->
  @if (label()) {
    <label class="text-sm font-medium text-gray-700">
      {{ label() }}
    </label>
  }

  <!-- Textarea -->
  <textarea
    [placeholder]="placeholder()"
    [value]="value()"
    [disabled]="isDisabled() || disabled()"
    [readOnly]="readonly()"
    [rows]="rows()"
    (input)="onInput($event)"
    (focus)="onFocus($event)"
    (blur)="onBlur($event)"
    [class]="
      'w-full px-4 py-2 bg-white border rounded-lg transition-colors outline-none placeholder-gray-400 ' +
      getResizeClass() + ' ' +
      (error()
        ? 'border-red-400 focus:border-red-500 focus:ring-2 focus:ring-red-200'
        : 'border-gray-300 hover:border-gray-400 focus:border-gray-500 focus:ring-2 focus:ring-gray-200') +
      (isDisabled() || disabled() ? ' bg-gray-50 text-gray-500 cursor-not-allowed' : '')
    "
  ></textarea>

  <!-- Footer: hint/error + counter -->
  <div class="flex justify-between items-center">
    <!-- Hint or error -->
    <div>
      @if (hint() && !error()) {
        <span class="text-sm text-gray-500">
          {{ hint() }}
        </span>
      }
      @if (error()) {
        <span class="text-sm text-red-500">
          {{ error() }}
        </span>
      }
    </div>

    <!-- Character counter -->
    @if (showCounter() && maxlength()) {
      <span
        [class]="
          'text-sm ' +
          (value().length >= maxlength()! ? 'text-red-500' : 'text-gray-400')
        "
      >
        {{ value().length }}/{{ maxlength() }}
      </span>
    }
  </div>
</div>